<!DOCTYPE html>
<!-- saved from url=(0050)http://getbootstrap.com/docs/4.0/examples/sign-in/ -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="http://getbootstrap.com/favicon.ico">

    <title>Reset password</title>

    <!-- Bootstrap core CSS -->
    <link href="./bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./signin.css" rel="stylesheet">
    <script src="//cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
</head>

<body class="text-center">
<form class="form-signin" action="#" method="post">
    <img class="mb-4" src="./bootstrap-solid.svg" alt="" width="72" height="72">
    <h1 class="h3 mb-3 font-weight-normal">Please reset password</h1>
    <label for="inputEmail" class="sr-only">Email address</label>
    <input type="email" id="inputEmail" class="form-control" placeholder="Email address" required="" autofocus="">
    <label for="pwd1" class="sr-only">Password</label>
    <input type="password" id="pwd1" class="form-control margin_bottom" placeholder="Original password" required="">
    <label for="pwd2" class="sr-only">Password</label>
    <input type="password" id="pwd2" class="form-control margin_bottom" placeholder="New password" required="">
    <label for="pwd3" class="sr-only">Password</label>
    <input type="password" id="pwd3" class="form-control" placeholder="Password confirm" required="">
    <button class="btn btn-lg btn-primary btn-block" type="submit">Reset password</button>
    <p class="mt-5 mb-3 text-muted">© Netease 2018</p>
</form>

<script>
    $('.form-signin').submit(function() {
            var pwd_first = document.getElementById('pwd2').value;
            var pwd_second = document.getElementById('pwd3').value;
            if (pwd_first != pwd_second) {
                alert('两次密码输入不相同')
            }
    })
</script>

<script>
    $('.form-signin').submit(function(e) {
        $.ajax({
            method: 'POST',
            url: '/reset_password',
            data: {
                accountId:document.getElementById('inputEmail').value,
                password:document.getElementById('pwd1').value,
                newPassword:document.getElementById('pwd3').value

            },
            dataType: 'json',
            success: function (data) {
                if(data.code == "200") {
                    if(data.entity.success) {
                        location.href=data.entity.url
                    } else {
                        alert(data.entity.desc)
                    }
                }

            }
        })
        return false
    });
</script>

</body></html>